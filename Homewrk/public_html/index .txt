<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <head>
        
         <header class="w3-container w3-teal" id="posteo">
          
        <style type="text/css">
            #posteo{
                height: 80px;
            }
            #forma{
                padding-top: 25px;
                padding-left: 700px;
                font-size: 25px;
            }
            #caja{
                width: 350px;
                
            }
            #todo{
                text-align: justify;
                font-weight: bold;
            }
            
        </style>
        
        <form action="" id="forma">
           Post: <input type="text" name="pname">
        <input type="submit" value="Post">
        </form>
    </header>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
   
    <body onload="loadDoc()">
        <div class="w3-panel w3-pale-green w3-leftbar w3-rightbar" id="caja" >
        <div id="todo" >Ultimos Posts:<br><br></div>
        
        <script>
        
        function loadDoc() {
            var xhttp = new XMLHttpRequest();
            var xhttp2 = new XMLHttpRequest();
            
            xhttp2.open("GET", "https://jsonplaceholder.typicode.com/users", true);
            xhttp2.send();
            
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    var J = JSON.parse(this.responseText);
                    for(var x=J.length-1; x>0; x--){
                        if(x==(J.length-11))
                            break;
                        else{
                        document.getElementById("todo").innerHTML 
                                += "#"+x +" Id: "+J[x].id+"<br> " ;
                        
                        document.getElementById("todo").innerHTML 
                                += "User Id: "+nombre(J[x].userId,xhttp2)+" ..................<br><br><br><br>" ;
                        }
                    }
            }
            }; 
            
        xhttp.open("GET", "http://jsonplaceholder.typicode.com/posts", true);
        xhttp.send();
}

        function nombre(usu, xhttp2){
            var aux;
            var final;
            var J2 = JSON.parse(xhttp2.responseText);
            for(var aux in J2){
                if(usu == J2[aux].id){
                    final= J2[aux].username;    
             //       break;
                }
            }
            return final;
        }
        function contador(){
            
            var J = JSON.parse(xhttp.responseText);
            var numUsuarios, cont=0;
            
            for(var x=1; x<J.length; x++){
                for(var y= x+1;y< J.length-1;y++){
                        if(J[x].id == J[y].id){
                            cont++;
                        }
                        else
                           {    
                             y++;  
                            }
                }
                numUsuarios.push(J[x].id + cont);
                cont=0;
        }
        alert(numUsuarios);
        return numUsuarios;
    }
        </script>
        </div>
    </body>
</html>
